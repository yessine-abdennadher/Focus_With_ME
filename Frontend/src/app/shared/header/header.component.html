<header *ngIf="showHeader" class="bg-white transition-all duration-500 ease-in-out text-gray-600 body-font sticky top-0 z-50 shadow-md dark:bg-gray-800 dark:text-gray-100 dark:shadow-inner">
  <div class="transition-all duration-500 ease-in-out container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
    
    <!-- Logo -->
    <a class="flex title-font font-medium text-gray-900 mb-4 md:mb-0 items-center" routerLink="/">
      <div class="flex flex-col ml-3">
        <span class="text-[20px] text-gray-900 font-semibold dark:text-gray-100">Focus With Me</span>
        <span class="text-[10px] mt-1 text-sky-800 font-semibold dark:text-sky-400">THE JOY OF LEARNING</span>
      </div>
    </a>

    <!-- Navigation -->
    <nav class="md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center">
      <a routerLink="/home" class="mr-5 font-[400] dark:text-gray-300 hover:text-sky-800">Solo Study</a>
      <a routerLink="/goal" class="mr-5 font-[400] dark:text-gray-300 hover:text-sky-800">Study Goals</a>
      <a routerLink="/test" class="mr-5 font-[400] dark:text-gray-300 hover:text-sky-800">Chat Rooms</a>
      <a routerLink="/stat" class="mr-5 font-[400] dark:text-gray-300 hover:text-sky-800">Study Stats</a>
    </nav>

<!-- Toggle Dark Mode -->
<label class="relative inline-flex items-center cursor-pointer mt-4">
  <input type="checkbox" class="sr-only peer" (change)="toggleDarkMode()" [checked]="isDarkMode" />
  <div class="w-14 h-8 bg-gray-300 rounded-full peer-checked:bg-gray-700 transition-colors relative">
    <!-- Toggle Circle (Thumb) -->
    <div class="w-6 h-6 bg-white rounded-full shadow-md flex items-center justify-center absolute top-1 left-1 transition-transform duration-300 peer-checked:translate-x-8">
      <!-- Soleil -->
      <svg *ngIf="!isDarkMode" class="w-4 h-4 text-yellow-400" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
        <path fill-rule="evenodd" d="M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V3ZM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414L6.343 4.929Zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414l1.414-1.414ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H3Zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2ZM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414Zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0v-2Z" clip-rule="evenodd"/>
      </svg>

      <!-- Lune -->
      <svg *ngIf="isDarkMode" class="w-4 h-4 text-yellow-200" fill="currentColor" viewBox="0 0 20 20">
        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
      </svg>
    </div>
  </div>
</label>



<!-- Icône utilisateur avec menu -->
<!-- Icône utilisateur -->
<div class="relative ml-4 mt-4">
  <button (click)="toggleMenu($event)" class="bg-sky-700 text-white p-2 rounded-full focus:outline-none hover:bg-sky-800">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M5.121 17.804A9.004 9.004 0 0112 15c2.21 0 4.216.804 5.879 2.137M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
  </button>
</div>

<!-- Menu flottant fixé au coin supérieur droit de l'écran -->
<div *ngIf="showMenu"
     class="fixed top-[75px] right-[28px] w-40 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] dark:bg-gray-800 dark:text-white">
  <ng-container *ngIf="isLoggedIn(); else guestOptions">
    <a routerLink="/stat" class="block px-4 py-1 hover:bg-gray-100 dark:hover:bg-gray-700">Profil</a>
    <button (click)="logout()" class="w-full text-left px-4 py-1  hover:bg-gray-100 dark:hover:bg-gray-700">Log out</button>
  </ng-container>
  <ng-template #guestOptions>
    <button (click)="login()" class="w-full text-left px-4 py-1 hover:bg-gray-100 dark:hover:bg-gray-700">Log in</button>
  </ng-template>
</div>




  </div>
</header>
